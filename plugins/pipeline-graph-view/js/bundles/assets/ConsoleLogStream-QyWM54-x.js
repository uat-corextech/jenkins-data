import{j as p,r as f,R as D}from"./PipelineGraphModel-CkbKqdsm.js";import{O as S,t as N,l as I}from"./PipelineConsole-CODcR0Be.js";import"./stages-BscW_f2X.js";import"./PipelineGraph-q2ZQGuyb.js";import"./user-preference-provider-BZb2Bigi.js";import"./symbols-DISjDpzq.js";import"./user-permission-provider-RW3H6FTX.js";import"../pipeline-console-view-bundle.js";var E={amp:"&",gt:">",lt:"<",nbsp:"Â ",quot:'"'},w=/^#[xX]([A-Fa-f0-9]+)$/,x=/^#([0-9]+)$/,V=/^([A-Za-z0-9]+)$/,P=function(){function i(e){this.named=e}return i.prototype.parse=function(e){if(e){var n=e.match(w);if(n)return String.fromCharCode(parseInt(n[1],16));if(n=e.match(x),n)return String.fromCharCode(parseInt(n[1],10));if(n=e.match(V),n)return this.named[n[1]]||"&"+n[1]+";"}},i}(),L=/[\t\n\f ]/,G=/[A-Za-z]/,B=/\r\n?/g;function c(i){return L.test(i)}function k(i){return G.test(i)}function $(i){return i.replace(B,`
`)}var z=function(){function i(e,n,s){s===void 0&&(s="precompile"),this.delegate=e,this.entityParser=n,this.mode=s,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var t=this.peek();if(t==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&t===`
`){var o=this.tagNameBuffer.toLowerCase();(o==="pre"||o==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var t=this.peek(),o=this.tagNameBuffer;t==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):t==="&"&&o!=="script"&&o!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(t))},tagOpen:function(){var t=this.consume();t==="!"?this.transitionTo("markupDeclarationOpen"):t==="/"?this.transitionTo("endTagOpen"):(t==="@"||t===":"||k(t))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(t))},markupDeclarationOpen:function(){var t=this.consume();if(t==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var o=t.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();o==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var t=this.consume();c(t)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var t=this.consume();c(t)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(t.toLowerCase()))},doctypeName:function(){var t=this.consume();c(t)?this.transitionTo("afterDoctypeName"):t===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(t.toLowerCase())},afterDoctypeName:function(){var t=this.consume();if(!c(t))if(t===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var o=t.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),r=o.toUpperCase()==="PUBLIC",a=o.toUpperCase()==="SYSTEM";(r||a)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),r?this.transitionTo("afterDoctypePublicKeyword"):a&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var t=this.peek();c(t)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):t==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):t==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):t===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var t=this.consume();t==='"'?this.transitionTo("afterDoctypePublicIdentifier"):t===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(t)},doctypePublicIdentifierSingleQuoted:function(){var t=this.consume();t==="'"?this.transitionTo("afterDoctypePublicIdentifier"):t===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(t)},afterDoctypePublicIdentifier:function(){var t=this.consume();c(t)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):t===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):t==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):t==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var t=this.consume();c(t)||(t===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):t==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):t==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var t=this.consume();t==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):t===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(t)},doctypeSystemIdentifierSingleQuoted:function(){var t=this.consume();t==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):t===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(t)},afterDoctypeSystemIdentifier:function(){var t=this.consume();c(t)||t===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var t=this.consume();t==="-"&&this.peek()==="-"?this.transitionTo("commentStartDash"):t===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(t),this.transitionTo("comment"))},commentStartDash:function(){var t=this.consume();t==="-"?this.transitionTo("commentEnd"):t===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var t=this.consume();t==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(t)},commentEndDash:function(){var t=this.consume();t==="-"&&this.peek()==="-"?this.delegate.appendToCommentData(t):t==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+t),this.transitionTo("comment"))},commentEnd:function(){var t=this.consume();t===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+t),this.transitionTo("comment"))},tagName:function(){var t=this.consume();c(t)?this.transitionTo("beforeAttributeName"):t==="/"?this.transitionTo("selfClosingStartTag"):t===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(t)},endTagName:function(){var t=this.consume();c(t)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):t==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):t===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(t)},beforeAttributeName:function(){var t=this.peek();if(c(t)){this.consume();return}else t==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):t===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):t==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(t)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var t=this.peek();c(t)?(this.transitionTo("afterAttributeName"),this.consume()):t==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):t==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):t===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):t==='"'||t==="'"||t==="<"?(this.delegate.reportSyntaxError(t+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(t)):(this.consume(),this.delegate.appendToAttributeName(t))},afterAttributeName:function(){var t=this.peek();if(c(t)){this.consume();return}else t==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):t==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):t===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(t))},beforeAttributeValue:function(){var t=this.peek();c(t)?this.consume():t==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):t==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):t===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(t))},attributeValueDoubleQuoted:function(){var t=this.consume();t==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):t==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(t)},attributeValueSingleQuoted:function(){var t=this.consume();t==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):t==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(t)},attributeValueUnquoted:function(){var t=this.peek();c(t)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):t==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):t==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):t===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(t))},afterAttributeValueQuoted:function(){var t=this.peek();c(t)?(this.consume(),this.transitionTo("beforeAttributeName")):t==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):t===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var t=this.peek();t===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var t=this.consume();(t==="@"||t===":"||k(t))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(t))}},this.reset()}return i.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},i.prototype.transitionTo=function(e){this.state=e},i.prototype.tokenize=function(e){this.reset(),this.tokenizePart(e),this.tokenizeEOF()},i.prototype.tokenizePart=function(e){for(this.input+=$(e);this.index<this.input.length;){var n=this.states[this.state];if(n!==void 0)n.call(this);else throw new Error("unhandled state "+this.state)}},i.prototype.tokenizeEOF=function(){this.flushData()},i.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},i.prototype.peek=function(){return this.input.charAt(this.index)},i.prototype.consume=function(){var e=this.peek();return this.index++,e===`
`?(this.line++,this.column=0):this.column++,e},i.prototype.consumeCharRef=function(){var e=this.input.indexOf(";",this.index);if(e!==-1){var n=this.input.slice(this.index,e),s=this.entityParser.parse(n);if(s){for(var t=n.length;t;)this.consume(),t--;return this.consume(),s}}},i.prototype.markTagStart=function(){this.delegate.tagOpen()},i.prototype.appendToTagName=function(e){this.tagNameBuffer+=e,this.delegate.appendToTagName(e)},i.prototype.isIgnoredEndTag=function(){var e=this.tagNameBuffer;return e==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||e==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||e==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},i}(),O=function(){function i(e,n){n===void 0&&(n={}),this.options=n,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new z(this,e,n.mode),this._currentAttribute=void 0}return i.prototype.tokenize=function(e){return this.tokens=[],this.tokenizer.tokenize(e),this.tokens},i.prototype.tokenizePart=function(e){return this.tokens=[],this.tokenizer.tokenizePart(e),this.tokens},i.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},i.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},i.prototype.current=function(){var e=this.token;if(e===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return e;for(var n=0;n<arguments.length;n++)if(e.type===arguments[n])return e;throw new Error("token type was unexpectedly "+e.type)},i.prototype.push=function(e){this.token=e,this.tokens.push(e)},i.prototype.currentAttribute=function(){return this._currentAttribute},i.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},i.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},i.prototype.appendToDoctypeName=function(e){this.current("Doctype").name+=e},i.prototype.appendToDoctypePublicIdentifier=function(e){var n=this.current("Doctype");n.publicIdentifier===void 0?n.publicIdentifier=e:n.publicIdentifier+=e},i.prototype.appendToDoctypeSystemIdentifier=function(e){var n=this.current("Doctype");n.systemIdentifier===void 0?n.systemIdentifier=e:n.systemIdentifier+=e},i.prototype.endDoctype=function(){this.addLocInfo()},i.prototype.beginData=function(){this.push({type:"Chars",chars:""})},i.prototype.appendToData=function(e){this.current("Chars").chars+=e},i.prototype.finishData=function(){this.addLocInfo()},i.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},i.prototype.appendToCommentData=function(e){this.current("Comment").chars+=e},i.prototype.finishComment=function(){this.addLocInfo()},i.prototype.tagOpen=function(){},i.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},i.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},i.prototype.finishTag=function(){this.addLocInfo()},i.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},i.prototype.appendToTagName=function(e){this.current("StartTag","EndTag").tagName+=e},i.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},i.prototype.appendToAttributeName=function(e){this.currentAttribute()[0]+=e},i.prototype.beginAttributeValue=function(e){this.currentAttribute()[2]=e},i.prototype.appendToAttributeValue=function(e){this.currentAttribute()[1]+=e},i.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},i.prototype.reportSyntaxError=function(e){this.current().syntaxError=e},i}();function R(i,e){var n=new O(new P(E),e);return n.tokenize(i)}const A="LinkifyResult",b="StartTag",v="EndTag",T="Chars",F="Comment",Q="Doctype";function j(i,e={}){const n=R(i),s=[],t=[],o=new S(e,q);for(let r=0;r<n.length;r++){const a=n[r];if(a.type===b){s.push(a);const h=a.tagName.toUpperCase();if(!(h==="A"||o.ignoreTags.indexOf(h)>=0))continue;let l=s.length;H(h,n,++r,s),r+=s.length-l-1}else if(a.type!==T)s.push(a);else{const h=U(a.chars,o);s.push.apply(s,h)}}for(let r=0;r<s.length;r++){const a=s[r];switch(a.type){case A:t.push(a.rendered);break;case b:{let h="<"+a.tagName;a.attributes.length>0&&(h+=" "+M(a.attributes).join(" ")),a.selfClosing&&(h+=" /"),h+=">",t.push(h);break}case v:t.push(`</${a.tagName}>`);break;case T:t.push(y(a.chars));break;case F:t.push(`<!--${y(a.chars)}-->`);break;case Q:{let h=`<!DOCTYPE ${a.name}`;a.publicIdentifier&&(h+=` PUBLIC "${a.publicIdentifier}"`),a.systemIdentifier&&(h+=` "${a.systemIdentifier}"`),h+=">",t.push(h);break}}}return t.join("")}function U(i,e){const n=N(i),s=[];for(let t=0;t<n.length;t++){const o=n[t];o.t==="nl"&&e.get("nl2br")?s.push({type:b,tagName:"br",attributes:[],selfClosing:!0}):!o.isLink||!e.check(o)?s.push({type:T,chars:o.toString()}):s.push({type:A,rendered:e.render(o)})}return s}function H(i,e,n,s){let t=1;for(;n<e.length&&t>0;){let o=e[n];o.type===b&&o.tagName.toUpperCase()===i?t++:o.type===v&&o.tagName.toUpperCase()===i&&t--,s.push(o),n++}return s}function q({tagName:i,attributes:e,content:n}){return`<${i} ${_(e)}>${y(n)}</${i}>`}function y(i){return i.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function C(i){return i.replace(/"/g,"&quot;")}function _(i){const e=[];for(const n in i){const s=i[n]+"";e.push(`${n}="${C(s)}"`)}return e.join(" ")}function M(i){const e=[];for(let n=0;n<i.length;n++){const s=i[n][0],t=i[n][1]+"";e.push(`${s}="${C(t)}"`)}return e}function W(i){const e=/^\u001b\[([;0-9]*)m$/,n={isSelectGraphicRendition:!1,escapeCode:i},s=e.exec(i);if(s){n.isSelectGraphicRendition=!0,n.setFG=!1,n.setBG=!1,n.resetFG=!1,n.resetBG=!1;const t=(s[1]||"").split(";").map(o=>parseInt(o||"0"));for(const o of t)o>=30&&o<=37?n.setFG=o-30:o>=40&&o<=47?n.setBG=o-40:((o===38||o===0)&&(n.resetFG=!0,n.setFG=!1),(o===48||o===0)&&(n.resetBG=!0,n.setBG=!1))}return n}function Y(i){if(typeof i!="string")return[];const e=i.length;if(e===0)return[];let n=0,s=0,t=0,o=0,r=0;const a=[];for(;n<e&&(s=i.indexOf("\x1B",n),s!==-1);){if(o=i.indexOf("<!--",n),r=i.indexOf("-->",o),r!==-1&&(r+=3),s>o&&s<r){n=r;continue}s>n&&(a.push(i.substring(n,s)),n=s),s+=2;let h=i.charCodeAt(s);for(;s<e&&(h<64||h>126);)s++,h=i.charCodeAt(s);const u=W(i.substring(n,s+1));a.push(u),n=s+1,t=n}return t<e&&a.push(i.substr(t)),a}function K(i,e){const n=[];let s={setFG:!1,setBG:!1};for(let t=0;t<i.length;t++){const o=i[t];if(typeof o=="string")if(!s.setFG&&!s.setBG)n.push(p.jsx("div",{dangerouslySetInnerHTML:{__html:o}},`${e}-${t}`));else{const r=[];typeof s.setFG=="number"&&r.push(`ansi-fg-${s.setFG}`),typeof s.setBG=="number"&&r.push(`ansi-bg-${s.setBG}`),n.push(p.jsx("span",{className:r.join(" "),children:o}))}else if(o.isSelectGraphicRendition){const r={...s};o.resetFG&&(r.setFG=!1),o.resetBG&&(r.setBG=!1),typeof o.setFG=="number"&&(r.setFG=o.setFG),typeof o.setBG=="number"&&(r.setBG=o.setBG),s=r}}return n}const X=f.memo(function(e){const n=`?start-byte=${e.startByte}&selected-node=${e.stepId}`,s=`log-${e.stepId}-${e.lineNumber}`;return p.jsx("pre",{style:{background:"none",border:"none"},className:"console-output-line",children:p.jsxs("div",{className:"console-output-line",children:[p.jsx("a",{className:"console-line-number",id:s,href:`${n}#${s}`,onClick:()=>{history.replaceState({},"",n)},style:{width:Math.max(9*String(e.lineNumber).length,30)+"px"},children:e.lineNumber}),p.jsx("div",{className:"console-text",children:K(Y(j(e.content,I)),s)})]})})});function g(){return!window.location.hash.startsWith("#log-")}function at({step:i,logBuffer:e,onMoreConsoleClick:n,fetchExceptionText:s}){const t=f.useRef(null),[o,r]=f.useState(!1);f.useEffect(()=>()=>{t.current&&clearInterval(t.current)},[]),f.useEffect(()=>{i.state===D.failure&&s(i.id)},[i.id,i.state,s]),f.useEffect(()=>{o&&e.lines.length>0&&g()&&e.lines&&requestAnimationFrame(()=>{if(!g())return;const u=document.documentElement.scrollHeight;window.scrollTo({top:u})})},[o,e.lines]),f.useEffect(()=>{if(!g())return;const u=()=>{if(!g()){window.removeEventListener("scroll",u),r(!1);return}const l=window.scrollY+window.innerHeight,m=document.body.scrollHeight-l<300;r(m)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]),f.useEffect(()=>{const u=i.state===D.running||e.startByte<0;o&&u?t.current||(t.current=window.setInterval(()=>{n(i.id,e.startByte)},1e3)):t.current&&(clearInterval(t.current),t.current=null)},[o,i,e,n]);const[a,h]=f.useState(window.location.hash.startsWith("#log-"));return f.useEffect(()=>{if(!a)return;let u=window.location.hash;if(!u.startsWith("#log-"))return;let[l,d]=u.slice(5).split("-");if(d&&l!==i.id){h(!1);return}d||(d=l,l=i.id,u=`#log-${l}-${d}`,location.hash=u);const m=document.getElementById(u.slice(1));m&&(m.scrollIntoView({behavior:"smooth",block:"center"}),location.hash="",location.hash=u,h(!1))},[a,i.id,e.lines]),p.jsx("div",{role:"log",children:e.lines.map((u,l)=>p.jsx(X,{lineNumber:String(l),content:u,stepId:i.id,startByte:e.startByte},l))})}export{at as default};
//# sourceMappingURL=ConsoleLogStream-QyWM54-x.js.map
